"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[255],{18255:(e,t,a)=>{a.d(t,{A:()=>b});var s=a(95155),l=a(12115),i=a(76949),n=a(3932),r=a(6874),d=a.n(r),c=a(48256),m=a(90290),u=a(82638),o=a(82906),h=a(42955),g=a(45123);let x=(0,i.D)({authMode:"apiKey"});function b(){let[e,t]=(0,l.useState)([]),[a,i]=(0,l.useState)([]),[r,b]=(0,l.useState)([]),[f,y]=(0,l.useState)({}),[j,v]=(0,l.useState)(!1),[w,p]=(0,l.useState)({width:void 0,height:void 0});(0,l.useEffect)(()=>{E(),I()},[]),(0,l.useEffect)(()=>{let e=()=>{p({width:window.innerWidth,height:window.innerHeight})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let k=[0,350,750,1200],A=function(){let e=w.width;for(let t=k.length-1;t>=0;t--)if(k[t]<e)return t}(),N=w.width<750?-1:w.width<=992?2*w.width/6:.833*w.width*.6667/A,T=N<0?{}:{height:N,objectFit:"cover"};async function I(){v(!0);let e=await x.graphql({query:u.$3,variables:{limit:8}});b(e.data.albumByDate.nextToken),i(e.data.albumByDate.items),v(!1)}let D=(0,l.useCallback)(async()=>{if(!j&&r){if(v(!0),Object.keys(f).length<1){let e=await x.graphql({query:u.$3,variables:{limit:4,nextToken:r}});b(t=>e.data.albumByDate.nextToken),i(t=>[...t,...e.data.albumByDate.items])}else{let e=await x.graphql({query:u.X8,variables:{albumTagsId:f[0],limit:2,nextToken:r}}),t=e.data.albumTagsAlbumsByAlbumTagsId.items;b(t=>e.data.albumTagsAlbumsByAlbumTagsId.nextToken),i(e=>[...e,...t.map(e=>e.albums)])}v(!1)}},[r,j,f]);async function E(){t((await (0,h.yy)()).map((e,t)=>({...e,selected:!1,visible:!0,index:t})))}async function $(a){v(!0);let s=Object.keys(a);if(s.length<1)I(),t(e.map(e=>({...e,visible:!0,selected:!1})));else{let l=await x.graphql({query:u.X8,variables:{limit:8,albumTagsId:a[s[0]]}}),n=l.data.albumTagsAlbumsByAlbumTagsId.items;b(l.data.albumTagsAlbumsByAlbumTagsId.nextToken),t(e.map(e=>e.index in a?{...e,visible:!0,selected:!0}:{...e,visible:!1})),y(a),i(n.map(e=>e.albums).sort((e,t)=>{let a=new Date(e.date);return new Date(t.date)-a}))}v(!1)}async function B(e){$({...f,[e.index]:e.id})}async function S(e){delete f[e.index],$(f)}function C(e){let{tags:t}=e;return t.length<1?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(c.A,{name:"____"})}):(0,s.jsx)("div",{className:"p-1 pb-0",children:t.map(e=>e.visible?(0,s.jsx)(c.A,{selected:e.selected,name:e.title,onSelect:()=>B(e),onDeselect:()=>S(e)},e.id):(0,s.jsx)(s.Fragment,{}))})}let q=[1,2,3,4,5,6].map((e,t)=>(0,s.jsxs)(n.kv,{background:"dark",className:"text-white m-1 mb-2 bg-image hover-overlay",alignment:"end",children:[(0,s.jsx)(n.H1,{overlay:!0,src:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",alt:"...",style:T,className:""}),(0,s.jsxs)(n.yy,{style:{background:"linear-gradient(to top, hsla(0, 0%, 0%, 0) 50%, hsla(0, 0%, 0%, 0.5))"},children:[(0,s.jsx)(n.gw,{children:(0,s.jsx)("span",{className:"placeholder col-7"})}),(0,s.jsx)(n.tV,{children:(0,s.jsx)("span",{className:"placeholder col-3"})})]}),(0,s.jsx)("div",{className:"mask overlay",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"}})]},t));if(!a)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.gU,{className:"me-0 mt-0",children:(0,s.jsx)(n.m6,{className:"d-flex justify-items-start",children:(0,s.jsx)(C,{tags:e})})}),(0,s.jsx)(m.A,{items:q,breakpoints:k})]});let _=a.map((e,t)=>(0,s.jsx)(d(),{href:`/albums/${(0,o.sL)(e)}`,className:"text-light text-decoration-none",children:(0,s.jsxs)(n.kv,{background:"dark",className:"text-white m-1 mb-2 bg-image hover-overlay",alignment:"end",children:[(0,s.jsx)(n.H1,{overlay:!0,src:`https://${g.A.getValue("imageDeliveryHost")}/public/${e.featuredImage?e.featuredImage.id:""}-${e.featuredImage?e.featuredImage.filename:""}?width=1920`,alt:"...",style:T,className:""}),(0,s.jsxs)(n.yy,{style:{background:"linear-gradient(to top, hsla(0, 0%, 0%, 0) 50%, hsla(0, 0%, 0%, 0.5))"},children:[(0,s.jsx)(n.gw,{children:e.title}),e.desc.length>0?(0,s.jsx)(n.tV,{className:"text-truncate",children:e.desc}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(n.tV,{children:function(e){let t=new Date(e);return`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`}(e.date)})]}),(0,s.jsx)("div",{className:"mask overlay",style:{backgroundColor:"rgba(0, 0, 0, 0.3)"}})]})},t));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.gU,{className:"me-0",children:(0,s.jsx)(n.m6,{className:"d-flex justify-items-start",children:(0,s.jsx)(C,{tags:e})})}),(0,s.jsx)("div",{className:"d-flex",children:(0,s.jsx)(m.A,{items:_,breakpoints:k,loadNextItems:D,isLoading:j,setIsLoading:v})})]})}},48256:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(95155),l=a(12115),i=a(3932);function n(e){let{selected:t=!1,onSelect:a=()=>{},onDeselect:n=()=>{},name:r}=e,[d,c]=(0,l.useState)(t);function m(){d?(c(!1),n()):(c(!0),a())}return d?(0,s.jsxs)(i.al,{rounded:!0,className:"text-light m-1",size:"sm",color:"dark",onClick:()=>m(),children:[r,"  ",(0,s.jsx)(i.$u,{className:"text-white-50",icon:"times"})]}):(0,s.jsx)(i.al,{rounded:!0,outline:!0,onClick:()=>m(),className:"text-dark m-1",size:"sm",color:"dark",children:r})}},90290:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(95155),l=a(12115),i=a(3932);function n(e){let{items:t,breakpoints:a,loadNextItems:n=()=>{},isLoading:r=!0,setIsLoading:d=()=>{}}=e,[c,m]=(0,l.useState)({width:void 0,height:void 0}),[u,o]=(0,l.useState)(0),h=(0,l.useRef)(null),g=(0,l.useRef)();(0,l.useEffect)(()=>{o(g.current.offsetTop)},[]),(0,l.useEffect)(()=>{if("undefined"==typeof IntersectionObserver)return;let e=new IntersectionObserver(e=>{e[0].isIntersecting&&n()}),t=h.current;return t&&!r&&e.observe(t),()=>{t&&e.unobserve(t)}},[r,n]),(0,l.useEffect)(()=>{let e=()=>{m({width:window.innerWidth,height:window.innerHeight})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let x=function(){if(void 0===c.width)return 1;let e=c.width;for(let t=a.length-1;t>=0;t--)if(a[t]<e)return t}(),b=Array(x);for(let e=0;e<t.length;e++){let a=t[e],s=e%x;b[s]||(b[s]=[]),b[s].push(a)}return(0,s.jsxs)("div",{ref:g,children:[(0,s.jsx)(i.gU,{className:"m-1",style:{minHeight:`calc(100vh-${u}`},children:b.map((e,t)=>(0,s.jsx)(i.m6,{className:"column p-0",children:e.map(e=>e)},t))}),(0,s.jsx)("p",{className:"display-block",ref:h})]})}}}]);